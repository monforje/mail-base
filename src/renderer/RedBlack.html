<!DOCTYPE html>
<html>
  <head>
    <title>Red/Black Tree Visualization</title>

    <!-- css sheet for how the page is laid out -->

    <link rel="stylesheet" href="visualizationPageStyle.css" />

    <!-- jqueury stuff.  Only used for the animation speed slider. -->
    <link rel="stylesheet" href="ThirdParty/jquery-ui-1.8.11.custom.css" />
    <script src="ThirdParty/jquery-1.5.2.min.js"></script>
    <script src="ThirdParty/jquery-ui-1.8.11.custom.min.js"></script>

    <!-- Javascript for the actual visualization code -->
    <script
      type="text/javascript"
      src="AnimationLibrary/CustomEvents.js"
    ></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/UndoFunctions.js"
    ></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/AnimatedObject.js"
    ></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/AnimatedLabel.js"
    ></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/AnimatedCircle.js"
    ></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/AnimatedRectangle.js"
    ></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/AnimatedLinkedList.js"
    ></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/HighlightCircle.js"
    ></script>
    <script type="text/javascript" src="AnimationLibrary/Line.js"></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/ObjectManager.js"
    ></script>
    <script
      type="text/javascript"
      src="AnimationLibrary/AnimationMain.js"
    ></script>

    <script type="text/javascript" src="AlgorithmLibrary/Algorithm.js"></script>
    <script type="text/javascript" src="AlgorithmLibrary/RedBlack.js"></script>
    <script>
      window.initialPackages = [
        {
          senderPhone: 1234567890,
          receiverPhone: 9876543210,
          weight: 2.5,
          date: "2025-07-12",
        },
        {
          senderPhone: 1112223333,
          receiverPhone: 4445556666,
          weight: 1.2,
          date: "2025-07-11",
        },
        // ‚Ä¶
      ];
    </script>

    <script>
      (function () {
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º init, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ init() –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–ª–∏–Ω–≥
        if (typeof window.init !== "function") {
          console.error("init() –Ω–µ –Ω–∞–π–¥–µ–Ω–æ");
          return;
        }
        const originalInit = window.init;
        window.init = function () {
          // 1) –®—Ç–∞—Ç–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—É—Å—Ç–æ–≥–æ –¥–µ—Ä–µ–≤–∞
          originalInit();

          // 2) –¢–µ–ø–µ—Ä—å –ø–æ–ª–ª–∏–Ω–≥ ‚Äî –∂–¥—ë–º, –ø–æ–∫–∞ PackagesService –∑–∞–≥—Ä—É–∑–∏—Ç –¥–∞–Ω–Ω—ã–µ
          const interval = setInterval(() => {
            const svc = window.packagesService; // <- –≤–∞—à –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä (–ø–æ–¥–∫–ª—é—á—ë–Ω –∏–∑ main.bundle.js)
            if (!svc) {
              console.warn("packagesService –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
              return;
            }
            const pkgs = svc.getAllPackages();
            if (pkgs.length === 0) {
              // –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
              return;
            }
            clearInterval(interval);

            // 3) –ö–æ–≥–¥–∞ –ø–æ—è–≤–∏–ª–∏—Å—å –ø–∞–∫–µ—Ç—ã ‚Äî —ç–º—É–ª–∏—Ä—É–µ–º –∫–ª–∏–∫–∏ ¬´Insert¬ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ senderPhone
            const field = currentAlg.insertField;
            const button = currentAlg.insertButton;
            if (!field || !button) {
              console.error("–ù–µ –Ω–∞–π–¥–µ–Ω–æ insertField/insertButton –≤ currentAlg");
              return;
            }

            pkgs.forEach((pkg) => {
              const key = pkg.senderPhone.toString();
              console.log("üîπ –≤—Å—Ç–∞–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ UI:", key);
              field.value = key;
              button.click();
            });
          }, 300);
        };
      })();
    </script>
  </head>

  <body onload="init();" class="VisualizationMainPage">
    <div id="container">
      <div id="header">
        <h1>Red/Black Tree</h1>
      </div>

      <div id="mainContent">
        <div id="algoControlSection">
          <!-- Table for buttons to control specific animation (insert/find/etc) -->
          <!-- (filled in by javascript code specific to the animtion) -->
          <table id="AlgorithmSpecificControls"></table>
        </div>

        <!-- Drawing canvas where all animation is done.  Note:  can be resized in code -->

        <canvas id="canvas" width="1000" height="500"></canvas>

        <div id="generalAnimationControlSection">
          <table id="GeneralAnimationControls"></table>
        </div>
      </div>

      <div id="footer">
        <p><a href="Algorithms.html">Algorithm Visualizations</a></p>
      </div>
    </div>
    <!-- container -->
  </body>
</html>
